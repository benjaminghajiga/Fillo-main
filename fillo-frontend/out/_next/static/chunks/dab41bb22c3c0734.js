(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68643,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(38817),r=e.i(30909);function n(){let e=(0,a.useRouter)(),{user:n,token:i}=(0,l.useAuthStore)(),[d,x]=(0,s.useState)([]),[c,o]=(0,s.useState)(null),[m,h]=(0,s.useState)([]),[g,b]=(0,s.useState)(!0),[u,p]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[N,f]=(0,s.useState)(""),[v,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i?n?.role!=="FARMER"?e.push("/"):S():e.push("/auth/login")},[i,n,e]);let S=async()=>{try{b(!0),p("");let[e,t,s]=await Promise.all([r.apiClient.getFarmerEarnings(),r.apiClient.getEarningsStats(),r.apiClient.getMonthlyEarnings()]);x(e.data.earnings||[]),o(e.data.summary||t.data),h(s.data||[])}catch(e){p((0,r.getErrorMessage)(e))}finally{b(!1)}},E=async e=>{if(e.preventDefault(),!N||0>=parseFloat(N))return void p("Please enter a valid amount");if(!c||parseFloat(N)>c.availableToWithdraw)return void p(`Insufficient balance. Available: â‚¦${c?.availableToWithdraw||0}`);try{w(!0),p("");let e=await r.apiClient.withdrawEarnings(parseFloat(N));j(e.data.message),f(""),setTimeout(()=>S(),1500)}catch(e){p((0,r.getErrorMessage)(e))}finally{w(!1)}};return g?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Loading earnings..."})})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"My Earnings"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Track your sales and manage withdrawals"})]}),u&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:u}),y&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg",children:y}),(0,t.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Total Earnings"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["â‚¦",c?.totalEarnings?.toLocaleString()||0]})]}),(0,t.jsx)("div",{className:"text-4xl",children:"ðŸ’°"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Available to Withdraw"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:["â‚¦",c?.availableToWithdraw?.toLocaleString()||0]})]}),(0,t.jsx)("div",{className:"text-4xl",children:"ðŸ’µ"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Pending"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:["â‚¦",c?.pendingEarnings?.toLocaleString()||0]})]}),(0,t.jsx)("div",{className:"text-4xl",children:"â³"})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Total Sold"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:[c?.totalQuantitySold?.toFixed(2)," kg"]})]}),(0,t.jsx)("div",{className:"text-4xl",children:"ðŸ“¦"})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Withdraw Earnings"}),(0,t.jsxs)("form",{onSubmit:E,className:"max-w-md",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (â‚¦)"}),(0,t.jsx)("input",{type:"number",step:"100",min:"0",value:N,onChange:e=>f(e.target.value),placeholder:"Enter amount to withdraw",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Available: â‚¦",c?.availableToWithdraw?.toLocaleString()||0]})]}),(0,t.jsx)("button",{type:"submit",disabled:v||!c?.availableToWithdraw,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Processing...":"Withdraw"})]})]}),m.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Monthly Breakdown"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Month"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Earnings"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Transactions"})]})}),(0,t.jsx)("tbody",{children:m.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.month}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm font-semibold text-green-600",children:["â‚¦",e.earnings.toLocaleString()]}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.transactions})]},e.month))})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Earnings History"}),0===d.length?(0,t.jsx)("p",{className:"text-gray-600 text-center py-8",children:"No earnings yet. Start selling to see your earnings!"}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Order ID"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Amount"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Quantity Sold"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-900",children:"Status"})]})}),(0,t.jsx)("tbody",{children:d.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(e.createdAt).toLocaleDateString()}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600 font-mono",children:[e.orderId.substring(0,8),"..."]}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900",children:["â‚¦",e.amount.toLocaleString()]}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:[e.quantitySold.toFixed(2)," kg"]}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${(e=>{switch(e){case"COMPLETED":return"bg-green-100 text-green-800";case"WITHDRAWN":return"bg-blue-100 text-blue-800";default:return"bg-yellow-100 text-yellow-800"}})(e.status)}`,children:e.status})})]},e.id))})]})})]})]})})}e.s(["default",()=>n])}]);