(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82605,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(38817),i=e.i(30909);function l(){let e=(0,r.useRouter)(),{user:l,token:n}=(0,s.useAuthStore)(),[c,d]=(0,a.useState)([]),[o,m]=(0,a.useState)(!0),[u,x]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),[g,j]=(0,a.useState)({name:"",description:"",category:"",quantity:"",unit:"kg",pricePerUnit:"",image:null}),[b,y]=(0,a.useState)(null),[N,v]=(0,a.useState)(""),[f,P]=(0,a.useState)("");(0,a.useEffect)(()=>{n?l?.role!=="FARMER"?e.push("/"):w():e.push("/auth/login")},[n,l,e]);let w=async()=>{try{let e=await i.apiClient.getMyProducts();d(e.data)}catch(e){v(e.response?.data?.error||"Failed to load products")}finally{m(!1)}},C=e=>{let{name:t,value:a}=e.target;j(e=>({...e,[t]:a}))},U=async e=>{e.preventDefault(),v(""),P("");try{let e;g.image&&(e=await new Promise((e,t)=>{let a=new FileReader;a.onloadend=()=>e(a.result),a.onerror=t,a.readAsDataURL(g.image)}));let t={name:g.name,description:g.description,category:g.category,quantity:parseFloat(g.quantity),unit:g.unit,pricePerUnit:parseFloat(g.pricePerUnit),...e&&{image:e}};p?(await i.apiClient.updateProduct(p,t),P("Product updated successfully!")):(await i.apiClient.createProduct(t),P("Product added successfully!")),j({name:"",description:"",category:"",quantity:"",unit:"kg",pricePerUnit:"",image:null}),y(null),h(null),x(!1),w()}catch(e){v(e.response?.data?.error||"Failed to save product")}},k=async e=>{if(confirm("Are you sure you want to delete this product?"))try{await i.apiClient.deleteProduct(e),P("Product deleted successfully!"),w()}catch(e){v(e.response?.data?.error||"Failed to delete product")}};return o?(0,t.jsx)("div",{className:"container mx-auto py-12 text-center",children:"Loading..."}):(0,t.jsxs)("div",{className:"container mx-auto py-12",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"Farmer Dashboard"}),(0,t.jsx)("a",{href:"/farmer/earnings",className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:"ðŸ’° View Earnings"})]}),N&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded text-error",children:N}),f&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded text-success",children:f}),(0,t.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Your Products"}),(0,t.jsx)("button",{onClick:()=>{p?(h(null),j({name:"",description:"",category:"",quantity:"",unit:"kg",pricePerUnit:"",image:null}),y(null),x(!1)):x(!u)},className:"btn-primary",children:u?"Cancel":"+ Add Product"})]}),u&&(0,t.jsxs)("div",{className:"card mb-8",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-6",children:p?"Edit Product":"Add New Product"}),(0,t.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Product Name"}),(0,t.jsx)("input",{type:"text",name:"name",value:g.name,onChange:C,className:"form-input",placeholder:"e.g., Tomatoes",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Description (optional)"}),(0,t.jsx)("textarea",{name:"description",value:g.description,onChange:C,className:"form-input",placeholder:"Describe your product...",rows:3})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Category"}),(0,t.jsx)("input",{type:"text",name:"category",value:g.category,onChange:C,className:"form-input",placeholder:"e.g., Vegetables, Grains",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Quantity"}),(0,t.jsx)("input",{type:"number",name:"quantity",value:g.quantity,onChange:C,className:"form-input",placeholder:"100",step:"0.01",required:!0})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Unit"}),(0,t.jsxs)("select",{name:"unit",value:g.unit,onChange:C,className:"form-input",required:!0,children:[(0,t.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,t.jsx)("option",{value:"bags",children:"Bags"}),(0,t.jsx)("option",{value:"tons",children:"Tons"}),(0,t.jsx)("option",{value:"crates",children:"Crates"}),(0,t.jsx)("option",{value:"units",children:"Units"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label",children:"Price per Unit"}),(0,t.jsx)("input",{type:"number",name:"pricePerUnit",value:g.pricePerUnit,onChange:C,className:"form-input",placeholder:"0.00",step:"0.01",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"form-label block text-sm font-medium text-gray-700 mb-2",children:"Product Image (optional)"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-500 transition",children:[(0,t.jsx)("input",{type:"file",id:"image-upload",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/"))return void v("Please select a valid image file");if(t.size>5242880)return void v("Image size must be less than 5MB");j(e=>({...e,image:t}));let e=new FileReader;e.onloadend=()=>{y(e.result)},e.readAsDataURL(t),v("")}},className:"hidden"}),(0,t.jsx)("label",{htmlFor:"image-upload",className:"cursor-pointer",children:b?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("img",{src:b,alt:"Preview",className:"w-32 h-32 object-cover mx-auto rounded"}),(0,t.jsx)("p",{className:"text-sm text-green-600 font-semibold",children:"Click to change image"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:g.image?.name})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,t.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20a4 4 0 004 4h24a4 4 0 004-4V20m-14-2h.01M32 20a4 4 0 11-8 0 4 4 0 018 0zM5 44h38",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Click to upload or drag and drop"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})})]})]}),(0,t.jsx)("button",{type:"submit",className:"w-full btn-primary",children:p?"Update Product":"Add Product"})]})]}),0===c.length?(0,t.jsx)("div",{className:"card text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-600",children:"No products yet. Add your first product!"})}):(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(e=>(0,t.jsxs)("div",{className:"card",children:[e.image&&(0,t.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-48 object-cover rounded mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,t.jsxs)("div",{className:"space-y-2 mb-4 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Category:"})," ",e.category]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Available:"})," ",e.quantity," ",e.unit]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Price:"})," â‚¦",e.pricePerUnit.toLocaleString(),"/",e.unit]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Status:"})," ",e.available?"âœ“ Active":"âœ— Inactive"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{h(e.id),j({name:e.name,description:e.description||"",category:e.category,quantity:e.quantity.toString(),unit:e.unit,pricePerUnit:e.pricePerUnit.toString(),image:null}),y(e.image||null),x(!0),window.scrollTo(0,0)},className:"flex-1 btn-secondary text-sm",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>k(e.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm",children:"Delete"})]})]},e.id))}),(0,t.jsxs)("div",{className:"mt-12 pt-8 border-t",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Recent Orders"}),(0,t.jsx)("div",{className:"card text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Orders from buyers will appear here"})})]})]})}e.s(["default",()=>l])}]);